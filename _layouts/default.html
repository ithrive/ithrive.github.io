<!DOCTYPE html>
<html ng-app="App">
	<head>
    <base href="/" />
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>iThrive | {{ page.title }}</title>
		<link href="https://fonts.googleapis.com/css?family=Cormorant+SC|Quicksand|Gloria+Hallelujah" rel="stylesheet">
		<style>
			{% include main.css %}
		</style>

		<!-- bower:css -->
		<!-- endbower -->

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	</head>
	<body>
		<!--[if lte IE 9]>
			<script src="//cdn.rawgit.com/jpillora/xdomain/0.7.4/dist/xdomain.min.js" slave="http://tsko-mailchimp-service.herokuapp.com/ithrive.html"></script>
		<![endif]-->
{% include nav.html %}
{{ content }}
{% include footer.html %}

<script>
var knowledgeBaseLookup = {
	{% for entry in site.knowledge_base %}
		{% for term in entry.terms | split:',' %}
			"{{ term }}": {
				term: "{{ term }}",
				description: "{{ entry.description }}",
				url: "{{ entry.url }}",
			{% if entry.includeImage %}
				image: "/images{{ entry.url }}popover.jpg",
			{% endif %}
			},
		{% endfor %}
	{% endfor %}
};
</script>

<script type="text/ng-template" id="knowledgePopover.html">
  {% raw %}
  <div class="keywordPopover">
	  <div class="popover_image" style="background-image: url('{{ popover.image }}');" ng-if="popover.image"></div>
	  <div>{{ popover.description }}</div>
		<div class="clearfix">
			<a href="{{ popover.url }}" class="pull-right" target="_blank">Learn more <span class="fa fa-angle-right"></span></a>
		</div>
	</div>
	{% endraw %}
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-87283919-1', 'auto');
  ga('send', 'pageview');
</script>

<script>
  function loadScript(src, callback) {
    var s,r,t;
    r = false;
    s = document.createElement('script');
    s.type = 'text/javascript';
    s.src = src;
    s.onload = s.onreadystatechange = function() {
      //console.log( this.readyState ); //uncomment this line to see which ready states are called.
      if ( !r && (!this.readyState || this.readyState == 'complete') ) {
        r = true;
        callback();
      }
    };
    t = document.getElementsByTagName('script')[0];
    t.parentNode.insertBefore(s, t);
  }
  loadScript('http://cdn.jsdelivr.net/blazy/latest/blazy.min.js', function() {
    var bLazy = new Blazy();
  });
</script>

    {% if page.dev %}
		  <!-- build:js(.) main.js -->
      <!-- bower:js -->
      <script src="/bower_components/jquery/dist/jquery.js"></script>
      <script src="/bower_components/bootstrap-sass/assets/javascripts/bootstrap.js"></script>
      <script src="/bower_components/angular/angular.js"></script>
      <script src="/bower_components/spin.js/spin.js"></script>
      <script src="/bower_components/angular-spinner/angular-spinner.js"></script>
      <script src="/bower_components/lodash/lodash.js"></script>
      <script src="/bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
      <!-- endbower -->

      <script src="/scripts/app.js"></script>
      <!-- endbuild -->
    {% else %}
      <script src="/build/main.js" async></script>
    {% endif %}
	</body>
</html>